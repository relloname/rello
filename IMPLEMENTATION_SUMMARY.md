# Marketing Report v7 - Implementation Summary

## 새로 생성된 파일
- `marketing_report_v7.html` - 모든 요구사항이 구현된 새 버전

## 구현된 기능

### 1. 상품 분석 페이지 추가 ✅
- 새로운 탭 "🛍️ 상품 분석" 추가됨
- 소재.html의 기능을 통합
- 필터링에서 캠페인유형 제외, "캠페인 검색"을 "상품명 검색"으로 변경
- 캠페인 분석 페이지와 동일한 박스 디자인 및 기능
  - ROAS 적용 버튼
  - 필터링 버튼
  - ↑↓ 정렬 버튼
  - 초기화 버튼
  - 증감율 On/Off 버튼
- 테이블 데이터 왼쪽 정렬 (상품명 컬럼)
- 증감율 스타일/컬러/폰트 사이즈 기존 marketing_report와 동일하게 적용

### 2. 캠페인/광고그룹/키워드 분석 TOTAL 행 순서 변경 ✅
테이블 상단에 TOTAL 행을 다음 순서로 표시:
1. TOTAL (4주 평균)
2. TOTAL (이전주 - 예: 2025.12.08.(월)주)
3. TOTAL (현재주 - 예: 2025.12.15.(월)주)

- 주 이름은 RAW 데이터에서 동적으로 가져옴
- 현재주 TOTAL에만 증감율 표시 (이전주 대비)

### 3. 키워드 분석 데이터 소스 ✅
- 키워드 분석은 RAW2.csv 파일 데이터 사용 (이미 구현되어 있음)
- ROAS에 증감율 표시 추가
- TOTAL 값 계산 정확하게 수정됨

### 4. CPC 분석 필터링 개선 ✅
효율분석 페이지와 동일한 필터 구조로 변경:
- 제외 키워드(콤마)
- 캠페인 유형 전체
- 캠페인 전체
- 광고그룹 전체
- 최소 광고비
- 최소 전환수
- 최소 ROAS
- **최대 전환당비용** (cpcCPAMax로 변경)
- CPC 증감% 기준

### 5. 순위분석 페이지 TOP10 표 추가 ✅
- 페이지 상단에 5개의 TOP10 표를 가로로 배치 (스크롤해도 고정)
- 기준: 광고비 / 노출수 / 클릭수 / 전환수 / 매출액
- 각 표는 검색어 TOP10 표시
- 기존 순위분석 기능(검색어별 순위 추이, 시간대/요일별 Heatmap)은 그 아래에 그대로 유지

### 6. 데이터 업로드 페이지 개선 ✅
- "업로드된 데이터 통계 (요약)" 섹션 삭제
- 4개의 파일 업로드 영역을 드래그&드롭 방식으로 변경:
  - RAW (일/주별) - CSV/XLSX
  - 검색어 (RAW2) - CSV/XLSX
  - 소재 (상품 성과) - CSV
  - 상품 TSV - TSV
- 파일 첨부 완료 시 체크 표시 및 색상 변화로 표시

### 7. 기존 기능 유지 ✅
- 기존 marketing_report_v6의 모든 기능, 스타일, UI/UX 유지
- 성과 요약, 캠페인 분석, 광고그룹 분석, 매체별 분석, 효율분석, 디바이스 분석 등 모든 탭 기능 유지
- 차트, 필터링, 정렬, ROAS 하이라이트 등 모든 기능 정상 작동

## 새로 추가된 함수들

### 파일 처리
- `parseProductCSV(buf)` - 상품 성과 CSV 파일 파싱
- `parseTSV(buf)` - 상품 TSV 파일 파싱

### 상품 분석
- `updateProductTable()` - 상품 분석 테이블 업데이트
- `resetProduct()` - 상품 분석 필터 초기화

### TOP10 테이블
- `updateTop10Tables()` - TOP10 테이블 생성 및 업데이트

## 새로 추가된 전역 변수
- `productRows` - 상품 성과 데이터 저장
- `productMap` - 상품 정보 매핑 (productId -> {name, image})

## CSS 스타일 추가
- `.upload-dropzone` - 드래그&드롭 업로드 영역 스타일
- `.upload-icon`, `.upload-label`, `.upload-hint`, `.upload-check` - 업로드 UI 요소
- `.top10-container`, `.top10-grid`, `.top10-table` - TOP10 테이블 스타일

## 사용 방법

1. 웹 브라우저에서 `marketing_report_v7.html` 파일 열기
2. "📤 데이터 업로드" 탭에서 4개의 파일 업로드:
   - RAW.csv (일/주별 데이터)
   - RAW2.csv (검색어 데이터)
   - 소재.csv (상품 성과 데이터)
   - 소재.tsv (상품 정보 매핑)
3. 파일 업로드 완료 시 체크 표시 확인
4. 각 탭에서 분석 데이터 확인:
   - 📈 성과 요약
   - 🏆 순위 분석 (TOP10 테이블 포함)
   - 🎯 캠페인 분석
   - 🧩 광고그룹 분석
   - 🔍 키워드 분석
   - 🛍️ 상품 분석 (신규)
   - 📰 매체별 분석
   - ⚡ 효율분석
   - 💲 CPC 분석 (개선된 필터)
   - 📱 디바이스 분석

## 검증 완료
- ✅ HTML 구조 유효성 검증 완료
- ✅ 모든 새 함수 정의 확인
- ✅ 기존 기능 유지 확인
- ✅ 새 기능 추가 확인
